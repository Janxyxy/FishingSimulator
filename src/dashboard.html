<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fishing simulator</title>
    <link href="/output.css" rel="stylesheet" />
    <!--Tailwind CSS-->
    <script src="https://kit.fontawesome.com/c4ffb2ea08.js" crossorigin="anonymous"></script>
    <!--Muj font awesome-->
</head>

<body
    class="bg-fixed bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-gray-700 via-gray-900 to-black text-white">
    <header class="bg-gray-800 p-4 shadow-lg">
        <div class="container mx-auto flex justify-between m-2">
            <blockquote class="text-2xl font-semibold text-white">
                <!--text-->
                <span
                    class="before:block before:absolute before:-inset-1 before:-skew-y-2 before:bg-gradient-to-r from-purple-900 to-blue-500 relative inline-block">
                    <span class="relative text-white">Admin dashboard</span>
                </span>
                <i class="fa-solid fa-user ml-2"></i>
                <!--text-->
            </blockquote>
            <nav>
                <ul class="flex space-x-12 mt-1 mr-10">
                    <li>
                        <a href="/home" class="hover:text-blue-500">Home <i class="fa-solid fa-house"></i></a>
                    </li>
                    <li>
                        <a href="/register" class="hover:text-blue-500">Sing up
                            <i class="fas fa-user-plus ml-2"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/login" class="hover:text-blue-500">Login <i
                                class="fa-solid fa-right-to-bracket ml-2"></i></a>
                    </li>
                    <li>
                        <a href="/mainpage" class="hover:text-blue-500">Fishing simulator
                            <i class="fa-solid fa-fish"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/profile" class="hover:text-blue-500">Profile
                            <i class="fa-solid fa-user"></i>
                        </a>
                    </li>
                </ul>
            </nav>
    </header>
    <div class="max-w- p-5">

        <div
            class="p-4 max-w-screen-sm bg-white rounded-lg border shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold leading-none text-gray-900 dark:text-white">Users</h3>

            </div>
            <div class="flow-root">
                <ul role="list" class="divide-y  divide-gray-200 dark:divide-gray-700" id="userList">
                    <!-- List items will be appended here by JavaScript -->
                </ul>
            </div>
        </div>

        <script>
            function handleInventoryClick(event, url) {
                event.preventDefault();
                fetchInventory(url);
            }

            function fetchInventory(url) {
                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                    })
                    .catch(error => {
                        console.error('Error fetching inventory:', error);
                    });
            }

            fetch('/api/users')
                .then(response => response.json())
                .then(data => {
                    const userList = document.getElementById('userList');
                    data.forEach(user => {
                        const userItem = document.createElement('li');
                        userItem.className = "py-3 sm:py-4";
                        userItem.innerHTML = `
                        <div class="flex items-center space-x-4">
                            <div class="flex-shrink-0 mb-5">
                                <i class="fa-solid fa-user ml-2"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div>
                                    <span class="text-sm font-medium text-gray-900 truncate dark:text-white">
                                        ${user.username} /
                                    </span>
                                    <span class="text-sm text-gray-500 truncate dark:text-gray-400">
                                        ${user.email}
                                        <i class="fa-solid fa-envelope ml-1"></i>
                                    </span>
                                </div>
                                <div class="flex items-center mt-2 space-x-2">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-200 text-blue-800">
                                        ${user.id}
                                        <i class="fa-solid fa-id-card-clip ml-1"></i>
                                    </span>
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-200 text-green-800">
                                        ${new Date(user.creation_date).toLocaleString()}
                                        <i class="fa-solid fa-file-circle-plus ml-1"></i>
                                    </span>
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-200 text-red-800">
                                        ${new Date(user.last_update_time).toLocaleString()}
                                        <i class="fa-solid fa-pen ml-1"></i>
                                    </span>
                                </div>
                            </div>
                            <a id="inventory-link" class="inline-flex items-center text-base font-semibold text-white" onclick="handleInventoryClick(event, '/api/items/${user.id}')">
                                Inventory
                                <i class="fa-solid fa-box ml-1 mt-1"></i>
                            </a>
                        </div>
                    `;
                        userList.appendChild(userItem);
                    });
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        </script>
</body>

</html>